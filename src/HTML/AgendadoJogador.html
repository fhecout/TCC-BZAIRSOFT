<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agendador Jogador</title>
    <link rel="stylesheet" href="../css/reset.css">
    <style>
        body {
    background: linear-gradient(180deg, #292929 40.32%, #FF7300 100%);
    background-size: auto;
    height: 100vh;
    color: #FF7300;
}

header {
    display: flex;
    align-items: center;
    justify-content: center;
    background-color: #292929;
    text-decoration: none;
    gap: 20px;
}

header a:nth-child(2){
    color: #fff;
    transition: 0.3s ease-in;
}

header a:nth-child(2):hover{
    color: #ff7300;
}

        #agendados-container {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin: 20px;
        }

        .horario-card {
            border: 1px solid #ccc;
            border-radius: 5px;
            padding: 15px;
            width: 200px;
            text-align: center;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .horario-card p {
            margin: 5px 0;
        }
        h1 {
            text-align: center;
        }
        #agendados-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .horario-card {
            background-color: #292929;
            color: #fff;
        }
        </style>
</head>

<body>
    <header>
        <a href="../../index.html">
            <img src="../images/Logo.png" alt="Logo">
        </a>

        <a href="login.html">
            Voltar para página incial
        </a>
    </header>
    <h1>Horários Agendados</h1>
    <div id="agendados-container"></div>
    <script>
       document.addEventListener('DOMContentLoaded', fetchAgendados);

function fetchAgendados() {
    fetch('/AgendadorJogador', {
        method: 'POST',
        credentials: 'include' // Include cookies for the current domain
    })
    .then(response => {
        if (!response.ok) {
            throw new Error(`HTTP error! Status: ${response.status}`);
        }
        return response.json();
    })
    .then(data => renderAgendados(data.agendados))
    .catch(error => {
        console.error('Error fetching data:', error);
        // Handle errors, such as by displaying an error message to the user
    });
}

function renderAgendados(agendados) {
    const container = document.getElementById('agendados-container');
    container.innerHTML = ''; // Clear previous content
    agendados.forEach(agendado => {
        let statusText;
        switch (agendado.disp) {
            case 2:
                statusText = 'Horário em análise';
                break;
            case 3:
                statusText = 'Horário Agendado';
                break;
            default:
                statusText = 'Disponibilidade: ' + agendado.disp;
        }
        
        const card = document.createElement('div');
        card.className = 'horario-card';
        card.innerHTML = `
            <p><strong>ID:</strong> ${agendado.horario_id}</p>
            <p><strong>Dia:</strong> ${agendado.dia}</p>
            <p><strong>Horário:</strong> ${agendado.horario}</p>
            <p><strong>Status:</strong> ${statusText}</p>
            <p><strong>CPF:</strong> ${agendado.cliente_cpf}</p>
        `;
        container.appendChild(card);
    });
}

    </script>
</body>

</html>